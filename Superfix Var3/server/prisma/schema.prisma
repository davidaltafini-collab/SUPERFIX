generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// === ADMIN (Rămâne la fel) ===
model Admin {
  id           String @id @default(uuid())
  username     String @unique
  passwordHash String
}

// === EROU (Update Major) ===
model Hero {
  id                String   @id @default(uuid())
  alias             String
  realName          String?
  username          String   @unique
  passwordHash      String
  
  description       String   @db.Text
  powers            String
  location          String?  // Am facut optional ca sa nu dea erori
  
  avatarUrl         String?  @db.LongText
  videoUrl          String?  @db.LongText  // <--- LINIE NOUĂ (Video)

  hourlyRate        Int      @default(100)
  phone             String?
  email             String?
  category          String   @default("Electrician") // Sau Enum daca preferi

  trustFactor       Int      @default(50)
  missionsCompleted Int      @default(0)
  
  reviews           Review[]
  requests          ServiceRequest[]
}

// === REVIEW (Rămâne la fel) ===
model Review {
  id         String   @id @default(uuid())
  clientName String
  rating     Int
  comment    String
  date       DateTime @default(now())
  
  heroId     String
  hero       Hero     @relation(fields: [heroId], references: [id], onDelete: Cascade)
}

// === CERERE SERVICIU (TaskRabbit Style) ===
model ServiceRequest {
  id          String   @id @default(uuid())
  
  // -- CLIENT --
  clientName  String
  clientPhone String
  clientEmail String?
  description String   @db.Text
  
  // -- STATUS MISIUNE --
  // Valori posibile: "PENDING", "ASSIGNED", "IN_PROGRESS", "COMPLETED", "CANCELLED"
  status      String   @default("PENDING")
  
  // -- DOVEZI FOTO (NOU) --
  photoBefore String?  @db.LongText // Poză făcută la "Accept"
  photoAfter  String?  @db.LongText // Poză făcută la "Finish"
  
  date        DateTime @default(now())
  
  // -- LEGĂTURĂ --
  heroId      String
  hero        Hero     @relation(fields: [heroId], references: [id], onDelete: Cascade)
}

// === TABEL NOU: APLICAȚII EROI (Formular Simplu) ===
model HeroApplication {
  id        String   @id @default(uuid())
  name      String
  email     String
  phone     String
  category  String
  status    String   @default("PENDING") // PENDING, APPROVED, REJECTED
  date      DateTime @default(now())
}
